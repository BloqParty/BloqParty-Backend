// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model user {
  id          Int     @id @default(autoincrement())
  username    String  @unique
  password    String
  apikey      String
  description String?
  mapsPassed  Int     @default(0)
  recentMaps  String?
}

model score {
  id                      Int           @id
  userId                  String
  leftHandAverageScore    Float
  rightHandAverageScore   Float
  leftHandTimeDependency  Float
  rightHandTimeDependency Float
  perfectStreak           Int
  fcAccuracy              Float
  metadata                scoreMetadata @relation(fields: [scoreMetadataId], references: [id])
  scoreMetadataId         Int
}

model leaderboard {
  hash                           String              @unique
  plays                          Int                 @default(0)
  metadata                       leaderboardMetadata @relation(fields: [leaderboardMetadataBeatSaverId], references: [beatSaverId])
  leaderboardMetadataBeatSaverId String // Generated by prisma format
}

model leaderboardMetadata {
  beatSaverId String        @unique
  name        String
  mappers     String
  artists     String
  cover       String
  leaderboard leaderboard[] // Generated by prisma format
}

model scoreMetadata {
  id             Int      @id @default(autoincrement())
  timeSet        DateTime
  hash           String
  characteristic String
  hmd             String
  score          score[]
}
